(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-profile"],{"66aa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("a-form-model",{attrs:{labelAlign:"left","label-col":{span:2},"wrapper-col":{span:12}}},[a("a-form-model-item",{attrs:{label:"用户昵称"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.username,callback:function(t){e.$set(e.profileInfo,"username",t)},expression:"profileInfo.username"}})],1),a("a-form-model-item",{attrs:{label:"个人简介"}},[a("a-input",{attrs:{type:"textarea"},model:{value:e.profileInfo.desc,callback:function(t){e.$set(e.profileInfo,"desc",t)},expression:"profileInfo.desc"}})],1),a("a-form-model-item",{attrs:{label:"QQ号码"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.qq_chat,callback:function(t){e.$set(e.profileInfo,"qq_chat",t)},expression:"profileInfo.qq_chat"}})],1),a("a-form-model-item",{attrs:{label:"微信"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.wechat,callback:function(t){e.$set(e.profileInfo,"wechat",t)},expression:"profileInfo.wechat"}})],1),a("a-form-model-item",{attrs:{label:"微博"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.weibo,callback:function(t){e.$set(e.profileInfo,"weibo",t)},expression:"profileInfo.weibo"}})],1),a("a-form-model-item",{attrs:{label:"B站地址"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.bili,callback:function(t){e.$set(e.profileInfo,"bili",t)},expression:"profileInfo.bili"}})],1),a("a-form-model-item",{attrs:{label:"Email"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.email,callback:function(t){e.$set(e.profileInfo,"email",t)},expression:"profileInfo.email"}})],1),a("a-form-model-item",{attrs:{label:"头像"}},[a("a-upload",{attrs:{listType:"picture",name:"file",action:e.upUrl,headers:e.headers},on:{change:e.avatarChange}},[a("a-button",{staticStyle:{"margin-right":"10px"}},[a("a-icon",{attrs:{type:"upload"}}),e._v("点击上传 ")],1),e.profileInfo.avatar?[a("img",{staticStyle:{width:"120px",height:"100px"},attrs:{src:e.profileInfo.avatar}})]:e._e()],2)],1),a("a-form-model-item",{attrs:{label:"头像背景图"}},[a("a-upload",{attrs:{listType:"picture",name:"file",action:e.upUrl,headers:e.headers},on:{change:e.imgChange}},[a("a-button",{staticStyle:{"margin-right":"10px"}},[a("a-icon",{attrs:{type:"upload"}}),e._v("点击上传 ")],1),e.profileInfo.img?[a("img",{staticStyle:{width:"120px",height:"100px"},attrs:{src:e.profileInfo.img}})]:e._e()],2)],1),a("a-form-model-item",[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"danger"},on:{click:e.updateProfile}},[e._v("更新")])],1)],1)],1)},i=[],o=(a("96cf"),a("1da1")),s=a("34f1"),n={props:["id"],data:function(){return{profileInfo:{id:0,username:"",desc:"",qq_chat:"",wechat:"",weibo:"",bili:"",email:"",img:"",avatar:""},upUrl:s["a"]+"upload",headers:{}}},created:function(){this.id=window.sessionStorage.getItem("user_id"),this.getProfileInfo(this.id),this.headers={Authorization:"Bearer ".concat(window.sessionStorage.getItem("token"))}},methods:{getProfileInfo:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("profile/".concat(e));case 2:r=a.sent,i=r.data,200!==i.status&&(i.status,window.sessionStorage.clear(),t.$router.push("/"),t.$message.error(i.message)),t.profileInfo=i.data;case 6:case"end":return a.stop()}}),a)})))()},avatarChange:function(e){if(e.file.status,"done"===e.file.status){this.$message.success("图片上传成功");var t=e.file.response.url;this.profileInfo.avatar=t}else"error"===e.file.status&&this.$message.error("图片上传失败")},imgChange:function(e){if(e.file.status,"done"===e.file.status){this.$message.success("图片上传成功");var t=e.file.response.url;this.profileInfo.img=t}else"error"===e.file.status&&this.$message.error("图片上传失败")},updateProfile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("profile/".concat(e.profileInfo.id),e.profileInfo);case 2:if(a=t.sent,r=a.data,200===r.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.message));case 6:e.$message.success("个人信息更新成功"),setTimeout((function(){e.$router.push("/"),e.$router.go(0)}),300);case 8:case"end":return t.stop()}}),t)})))()}}},l=n,f=(a("c83a"),a("2877")),c=Object(f["a"])(l,r,i,!1,null,"7bc7c498",null);t["default"]=c.exports},c83a:function(e,t,a){"use strict";a("d502")},d502:function(e,t,a){}}]);